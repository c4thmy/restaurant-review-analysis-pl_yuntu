# 大众点评评论分析系统 - 使用示例

## 快速开始

### 1. 环境准备

#### Linux/macOS 用户
```bash
# 运行自动安装脚本
chmod +x setup.sh
./setup.sh
```

#### Windows 用户
```cmd
# 双击运行或在命令行执行
setup.bat
```

### 2. 基础使用示例

#### 示例1: 分析"嫩牛家潮汕火锅"评论
```bash
# 完整流程：爬取 -> 分析 -> 生成词云
python main.py pipeline "嫩牛家潮汕火锅" --city 北京 --months 3

# 执行结果：
# ✓ 爬取评论数据
# ✓ 智能分析处理
# ✓ 生成词云图表
# ✓ 保存结果文件
```

#### 示例2: 分步骤执行
```bash
# 步骤1: 爬取评论
python main.py crawl "海底捞火锅" --city 上海 --months 6

# 步骤2: 分析评论 (使用生成的文件名)
python main.py analyze data/comments_海底捞火锅_20241015_143022.json

# 步骤3: 生成词云
python main.py wordcloud data/comments_海底捞火锅_20241015_143022_analysis.json
```

#### 示例3: Web界面模式
```bash
# 启动Web服务器
python main.py web

# 浏览器访问: http://localhost:5000
# 在Web界面中进行可视化操作
```

## 实际应用场景

### 场景1: 餐厅经营分析

**目标**: 分析自家餐厅的顾客反馈

```bash
# 分析最近3个月的评论
python main.py pipeline "我的餐厅名称" --city 北京 --months 3
```

**预期输出**:
- 顾客满意度统计
- 主要好评关键词 (服务、味道、环境等)
- 负面反馈问题点
- 改进建议词云图

### 场景2: 竞品对比分析

**目标**: 对比同类型餐厅的顾客评价

```bash
# 分析竞争对手A
python main.py crawl "竞争对手A" --city 广州 --months 6

# 分析竞争对手B
python main.py crawl "竞争对手B" --city 广州 --months 6

# 分析自己的餐厅
python main.py crawl "我的餐厅" --city 广州 --months 6
```

### 场景3: 品牌口碑监测

**目标**: 持续监控品牌在不同城市的口碑

```bash
# 多城市数据收集
python main.py crawl "品牌连锁店" --city 北京 --months 1
python main.py crawl "品牌连锁店" --city 上海 --months 1
python main.py crawl "品牌连锁店" --city 深圳 --months 1
```

## 输出结果说明

### 1. 数据文件

运行后会在 `data/` 目录下生成以下文件：

```
data/
├── comments_嫩牛家潮汕火锅_20241015_143022.json      # 原始评论数据
├── comments_嫩牛家潮汕火锅_20241015_143022_analysis.json  # 分析结果
├── wordcloud_overall_20241015_143022.png             # 整体词云图
└── category_wordclouds_20241015_143022/               # 分类词云图目录
    ├── 味道_wordcloud.png
    ├── 服务_wordcloud.png
    ├── 环境_wordcloud.png
    └── 价格_wordcloud.png
```

### 2. 分析报告示例

```json
{
  "basic_stats": {
    "total_comments": 1205,
    "average_rating": 4.3,
    "unique_users": 1180,
    "average_length": 87.5
  },
  "keywords": [
    ["牛肉", 0.856],
    ["新鲜", 0.742],
    ["火锅", 0.698],
    ["服务", 0.621],
    ["态度", 0.587]
  ],
  "sentiments": {
    "distribution": {
      "positive": 856,
      "neutral": 267,
      "negative": 82
    },
    "average_score": 0.721
  },
  "labels": {
    "category_counts": {
      "味道": 743,
      "服务": 456,
      "环境": 234,
      "价格": 189,
      "食材": 567
    }
  }
}
```

### 3. 词云图效果

生成的词云图将突出显示：
- **高频正面词汇**: "好吃"、"新鲜"、"推荐"
- **服务相关**: "热情"、"周到"、"专业"
- **环境描述**: "干净"、"舒适"、"温馨"
- **味道评价**: "鲜美"、"香"、"正宗"

## 高级配置

### 1. 自定义分析类别

编辑 `config.py` 中的 `LABEL_CATEGORIES`：

```python
'LABEL_CATEGORIES': {
    '口味': ['好吃', '美味', '鲜美', '香', '甜', '辣'],
    '服务': ['服务', '态度', '热情', '周到', '专业'],
    '环境': ['环境', '装修', '氛围', '干净', '舒适'],
    '性价比': ['便宜', '实惠', '性价比', '值得', '划算'],
    '特色菜': ['招牌', '特色', '推荐', '必点', '招牌菜']
}
```

### 2. 调整爬取参数

```python
SPIDER_CONFIG = {
    'DELAY_RANGE': (2, 5),    # 增加延迟避免被封
    'RETRY_TIMES': 5,         # 增加重试次数
    'TIMEOUT': 15,            # 增加超时时间
}
```

### 3. 词云样式定制

```python
WORDCLOUD_CONFIG = {
    'width': 1200,
    'height': 800,
    'max_words': 300,         # 增加词汇数量
    'colormap': 'rainbow',    # 彩虹色系
    'background_color': 'black'  # 黑色背景
}
```

## 常见问题解决

### 1. 爬虫被拒绝访问

**问题**: 频繁请求导致IP被限制

**解决方案**:
```python
# 增加延迟时间
'DELAY_RANGE': (3, 8)

# 使用代理IP (在config.py中配置)
'USE_PROXY': True,
'PROXY_LIST': ['proxy1:port', 'proxy2:port']
```

### 2. 中文显示乱码

**问题**: 词云图中文显示为方块

**解决方案**:
```bash
# 安装中文字体 (Ubuntu/Debian)
sudo apt-get install fonts-wqy-zenhei

# 或下载字体文件到项目目录
wget https://github.com/googlefonts/noto-cjk/raw/main/Sans/OTC/NotoSansCJK-Regular.ttc
```

### 3. 内存不足

**问题**: 处理大量数据时内存溢出

**解决方案**:
```bash
# 分批处理数据
python main.py crawl "餐厅名" --months 1  # 减少时间范围

# 或增加系统虚拟内存
```

### 4. ChromeDriver版本问题

**问题**: WebDriver版本与Chrome不匹配

**解决方案**:
```bash
# 更新webdriver-manager
pip install --upgrade webdriver-manager

# 手动重新安装
python -c "from webdriver_manager.chrome import ChromeDriverManager; ChromeDriverManager().install()"
```

## 性能优化建议

### 1. 数据量控制
- 首次测试建议使用1个月数据
- 根据需求逐步增加时间范围
- 定期清理旧数据文件

### 2. 系统资源
- 确保至少4GB可用内存
- 关闭不必要的后台程序
- 使用SSD硬盘提升IO性能

### 3. 网络优化
- 使用稳定的网络连接
- 避免高峰时段运行
- 考虑使用CDN或代理

## 法律和伦理说明

### 使用原则
1. **合规使用**: 仅用于学习、研究和合法商业分析
2. **频率控制**: 合理设置爬取间隔，避免对网站造成负担
3. **数据保护**: 妥善保管获取的数据，不得泄露用户隐私
4. **商业使用**: 如需商业使用，请确保符合相关法律法规

### 免责声明
本工具仅供学习和研究使用，使用者需要：
- 遵守目标网站的使用条款
- 承担使用过程中的法律责任
- 确保使用行为的合法合规性

---

*如有技术问题或建议，欢迎提交Issue或联系开发者。*